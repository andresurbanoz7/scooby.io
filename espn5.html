
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Reproductor con Recarga Automática</title>
  <script src="https://cdn.jsdelivr.net/npm/@clappr/player@0.8/dist/clappr.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/swarmcloud-hls@latest/dist/p2p-engine.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/swarmcloud-hls@latest/dist/clappr-p2p-plugin.min.js"></script>
  <style>
    html, body { margin: 0; padding: 0; width: 100%; height: 100%; background: black; }
    #player { width: 100%; height: 100%; position: absolute; top: 0; left: 0; }
  </style>
</head>
<body>
  <div id="player"></div>
  <script>var playbackURL="",MW=[],_s="iel";
MW=[[127,"Vkg4MjcwNTFiZA=="],[67,"WkE4MjcxMDNESA=="],[24,"R3A4MjcxMDVsaw=="],[112,"WW04MjcwNDRqaA=="],[140,"Wm44MjcwNDV6RA=="],[82,"VGE4MjcwNDllcQ=="],[81,"SU84MjcwOTNwZw=="],[59,"aWU4MjcwNDJCYw=="],[44,"c1M4MjcwOTRleA=="],[0,"RWk4MjcxMDBaeA=="],[64,"c3g4MjcwNTlFTg=="],[57,"UVA4MjcwOTdFZw=="],[54,"TnE4MjcxMDFWTg=="],[10,"a1c4MjcwOTVweg=="],[134,"clQ4MjcwNDdBdQ=="],[43,"Y2Y4MjcxMDdHWA=="],[51,"SmY4MjcxMDZRWg=="],[71,"WnE4MjcwNTF3cA=="],[101,"blo4MjcwNTFpcw=="],[115,"ck44MjcwNDVzZA=="],[37,"Rm44MjcwNDhFTA=="],[153,"bno4MjcwNDVmTA=="],[4,"ZGc4MjcxMTFXWQ=="],[132,"ckE4MjcwNTF2bA=="],[48,"YUk4MjcwOTd6Rg=="],[12,"ZE04MjcxMDdvaw=="],[23,"Vkc4MjcwOTNTaw=="],[34,"akI4MjcxMDduVA=="],[147,"bnA4MjcwNDJsRg=="],[151,"Um44MjcwNDVSdg=="],[95,"eWw4MjcwNDdNTA=="],[88,"d2I4MjcwNTNKSg=="],[29,"QVY4MjcwOTdBRQ=="],[77,"eEY4MjcwNDZZeg=="],[98,"bWI4MjcwOTNCaA=="],[128,"TVc4MjcwNDhwTg=="],[80,"dmk4MjcwOTRVdw=="],[45,"V0k4MjcwOTNneQ=="],[66,"Rlg4MjcxMDdPeA=="],[40,"cWk4MjcwNDNHSw=="],[36,"UlE4MjcwNTRsRA=="],[91,"R2o4MjcwNTJUbQ=="],[1,"ZGg4MjcxMTJuVA=="],[18,"Uk44MjcxMDNOQg=="],[2,"WE04MjcxMTJydA=="],[137,"b1c4MjcxMDFUUg=="],[61,"UUM4MjcwNDdRUA=="],[143,"T1A4MjcwNDJ4eA=="],[58,"bEk4MjcxMTZYaw=="],[123,"UG04MjcwNDdhRA=="],[106,"YVY4MjcwOTd1dA=="],[47,"WE04MjcwNDNnbQ=="],[94,"WG84MjcwNTBuZQ=="],[22,"SGY4MjcwOTdCaQ=="],[63,"eXc4MjcwNTJzTg=="],[84,"enQ4MjcwNTJ6bQ=="],[129,"VG04MjcwNTBRSA=="],[41,"Ukc4MjcwOTlQdw=="],[30,"bU44MjcxMDBpUg=="],[35,"ZHA4MjcxMDVWSA=="],[46,"WFA4MjcxMDR3aQ=="],[121,"QnU4MjcwNTNPUA=="],[20,"Skw4MjcxMTJTcA=="],[89,"ZHE4MjcwNDZ1Uw=="],[120,"Q2w4MjcwNDlTcw=="],[70,"eXc4MjcwNTdkRw=="],[65,"cUo4MjcxMTJIWA=="],[21,"cWk4MjcxMTBYbQ=="],[69,"WFc4MjcxMDZJSw=="],[27,"ZE04MjcxMDFQWA=="],[53,"Qm04MjcwNDNXZQ=="],[76,"WEs4MjcwNDh5dg=="],[49,"dUw4MjcxMTFaRQ=="],[97,"YUU4MjcwOTRkbA=="],[135,"ZG44MjcwNDltaw=="],[141,"aUk4MjcwNTNoWg=="],[26,"V2M4MjcxMDRNbQ=="],[136,"eGg4MjcwMzRxdA=="],[93,"Y0E4MjcwNDdJSQ=="],[102,"VU04MjcwOTVITg=="],[142,"UUQ4MjcwNDVQTA=="],[90,"aVo4MjcwNTBveQ=="],[19,"eHE4MjcxMTFNTg=="],[109,"amY4MjcwNDZCSQ=="],[38,"eU04MjcwNDhrZw=="],[33,"eGw4MjcwOTVWTg=="],[55,"dk84MjcxMDZyUg=="],[78,"QnQ4MjcwOTdBWQ=="],[68,"ZHY4MjcwOTd5VA=="],[74,"bHU4MjcwNTJ3aQ=="],[11,"Rnk4MjcxMDFqSQ=="],[13,"c0Y4MjcwNDJURg=="],[111,"a2k4MjcwNDFNRg=="],[85,"aGo4MjcwOTZ4WQ=="],[28,"ZVI4MjcxMTR4Yg=="],[72,"eHo4MjcwNDZjeQ=="],[42,"d0k4MjcxMDRVRw=="],[5,"b1M4MjcwNTRSQw=="],[6,"Zno4MjcwNDNweg=="],[52,"cFE4MjcwNDlLWQ=="],[131,"RFQ4MjcwNDZZRQ=="],[146,"b3k4MjcwNDlkcQ=="],[9,"ZUM4MjcxMDdBdA=="],[148,"Slc4MjcwNDh4Rg=="],[122,"bmQ4MjcwNDlLUg=="],[7,"SVQ4MjcwNDNCVA=="],[104,"eU44MjcwOThVYw=="],[138,"emw4MjcxMDhmUg=="],[133,"Qm04MjcwNDVWTg=="],[108,"SFY4MjcwNDZUZg=="],[56,"emE4MjcwOTZ1ZQ=="],[62,"bmw4MjcxMTNnYg=="],[31,"TXI4MjcwOTZ6bQ=="],[139,"VHo4MjcwNTdXZQ=="],[99,"em44MjcwOTdDSA=="],[100,"cFE4MjcwNTNqdQ=="],[75,"UGs4MjcwOTZ5Tw=="],[96,"VlY4MjcwNTFVeg=="],[25,"cHk4MjcxMTFOdA=="],[126,"TEk4MjcwNDVZZQ=="],[16,"Zk84MjcwOTNPQw=="],[145,"TkM4MjcwNDZpUw=="],[119,"cnM4MjcwNTJPTg=="],[117,"Vkc4MjcwNDhWSA=="],[150,"cEQ4MjcwNDJ6bA=="],[79,"VmQ4MjcwNDREWg=="],[149,"VUs4MjcwNDdnaQ=="],[17,"bHI4MjcwOTVpYw=="],[83,"Y3E4MjcwNDlIcw=="],[124,"Q2g4MjcwNDlhbQ=="],[50,"Tk04MjcxMDhGTQ=="],[130,"ZEU4MjcwNTJ5Vg=="],[86,"RGM4MjcwNTNkZw=="],[15,"Y2g4MjcxMTBoUg=="],[87,"ZGw4MjcwNTJhcg=="],[32,"cHk4MjcwNDJvdQ=="],[107,"bUg4MjcwOTR6RA=="],[152,"Vkk4MjcwNTNUYQ=="],[116,"SVc4MjcwNTFSbQ=="],[3,"c0Q4MjcxMDh5ZA=="],[92,"Slg4MjcwNDVaWg=="],[114,"d1U4MjcwNDFaSQ=="],[113,"ZGg4MjcwNTFWRg=="],[110,"c3I4MjcwNDlEQg=="],[118,"ZEk4MjcwNTBISA=="],[39,"cGs4MjcwNDdsaw=="],[73,"bnc4MjcwOTZIcw=="],[144,"c1I4MjcwNDVKeg=="],[105,"cng4MjcwNDlmQQ=="],[125,"VXA4MjcwNDFUZQ=="],[103,"bkc4MjcwOTh6bQ=="],[60,"Rlg4MjcxMDV1ag=="],[14,"bFQ4MjcwOTVxVQ=="],[8,"ZVU4MjcxMTF0Wg=="]];
MW.sort((a,b)=>a[0]-b[0]);
var k=(753717+73279);
MW.forEach(e=>{
      let v = e[1];
      playbackURL += String.fromCharCode(parseInt(atob(v).replace(/\D/g, '')) - k);
    });

    var currentPlayer = null;
    var intentosFallidos = 0;

    function iniciarPlayer() {
      const p2pConfig = { trackerZone: 'us', sourceUrl: playbackURL };
      P2PEngineHls.tryRegisterServiceWorker(p2pConfig).then(() => {
        if (currentPlayer) currentPlayer.destroy();
        currentPlayer = new Clappr.Player({
          source: playbackURL,
          parentId: "#player",
          plugins: [SwarmCloudClapprPlugin],
          width: "100%",
          height: "100%",
          autoPlay: true,
          mute: false,
          playsinline: true,
          playback: {
            hlsjsConfig: {
              maxBufferSize: 0,
              maxBufferLength: 12,
              liveSyncDurationCount: 3,
              p2pConfig: p2pConfig
            }
          }
        });
        window.player = currentPlayer;
      });
    }

    function verificarReproduccion() {
      setInterval(() => {
        if (!currentPlayer) return;
        const state = currentPlayer.getPlayback()?.getState?.();
        console.log("Estado:", state);
        if (state === "IDLE" || state === "ERROR" || state === "STOPPED") {
          intentosFallidos++;
          console.warn("Reintentando... intento", intentosFallidos);
          if (intentosFallidos >= 3) {
            console.error("Recargando página...");
            location.reload();
          } else {
            iniciarPlayer();
          }
        }
      }, 30000); // cada 30 segundos
    }

    iniciarPlayer();
    verificarReproduccion();
  </script>
</body>
</html>
