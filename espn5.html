<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Reproductor Resistente</title>
  <script src="https://cdn.jsdelivr.net/npm/@clappr/player@0.8/dist/clappr.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/swarmcloud-hls@latest/dist/p2p-engine.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/swarmcloud-hls@latest/dist/clappr-p2p-plugin.min.js"></script>
  <style>
    body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: black; }
    #player { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
  </style>
</head>
<body>
  <div id="player"></div>
  <script>
    // Aquí pega el arreglo iN actualizado del HTML de hoy
    var iN = [ [81,"Z003OTU3MjdDcw=="],[88,"R0w3OTU3MjlGVQ=="],[3,"eWw3OTU3ODdFUg=="],[85,"bHQ3OTU3MzJpQg=="],[6,"eWc3OTU3MjJRQw=="],[130,"VE43OTU3MjRvdg=="],[92,"UFg3OTU3MjRmTQ=="],[144,"bmE3OTU3MjVJcg=="],[120,"WUE3OTU3MjZudA=="],[17,"dlc3OTU3ODJLeA=="],[104,"bnE3OTU3MjNHVw=="],[86,"UUk3OTU3MjRQbQ=="],[10,"dmM3OTU3NzJvTA=="],[26,"QVo3OTU3ODBNeQ=="],[123,"Z3E3OTU3MjV0ag=="],[67,"WVM3OTU3NzZVSA=="],[138,"U2o3OTU3MzZacg=="],[151,"VnM3OTU3MjR1Yg=="],[89,"Wlk3OTU3Nzdjag=="],[95,"bEE3OTU3MjZCUQ=="],[93,"R2Q3OTU3NzJTZw=="],[99,"UnU3OTU3MjlLdw=="],[25,"Tk83OTU3ODNYUw=="],[54,"Vmo3OTU3ODV2ZQ=="],[51,"WlI3OTU3MjhaUw=="],[7,"Ukg3OTU3MjJOTg=="],[47,"ZXE3OTU3NzZ3WQ=="],[133,"ang3OTU3MjdTeA=="],[103,"TnQ3OTU3MzBjYQ=="],[65,"Tko3OTU3ODZNZw=="],[124,"dVk3OTU3MjBMVQ=="],[126,"UFE3OTU3MzBheQ=="],[41,"cVk3OTU3ODNiRg=="],[0,"elk3OTU3NzlIRw=="],[36,"Y083OTU3MjdkaQ=="],[58,"eWU3OTU3MjFDcQ=="],[84,"ek43OTU3MjZzZA=="],[105,"bW43OTU3NzZLeQ=="],[122,"VEg3OTU3MjdnQw=="],[69,"SFE3OTU3MzZudQ=="],[57,"eXQ3OTU3OTVzRw=="],[40,"YUM3OTU3Nzh4Vw=="],[13,"TGQ3OTU3NzRoRw=="],[129,"amY3OTU3MzBXVA=="],[70,"alo3OTU3NzRUaA=="],[98,"THg3OTU3MzBzdg=="],[97,"WWM3OTU3MzJtVA=="],[78,"VmQ3OTU3NzV4bw=="],[132,"THc3OTU3MjZFZA=="],[62,"U283OTU3MzFOTg=="],[143,"dUk3OTU3MjRobw=="],[48,"VGM3OTU3OTBwRw=="],[2,"eEw3OTU3OTFhRg=="],[94,"R1k3OTU3MzFuZw=="],[142,"TXU3OTU3MjFFZg=="],[137,"akE3OTU3ODdacA=="],[43,"RlI3OTU3NzNqUA=="],[34,"V2k3OTU3ODREeQ=="],[52,"ZHI3OTU3MjJvZg=="],[102,"WWQ3OTU3MjZqVA=="],[21,"TFM3OTU3NzZ6VQ=="],[118,"WGU3OTU3MzBGSA=="],[27,"UWE3OTU3OTNaQQ=="],[148,"SGc3OTU3Mjdraw=="],[87,"dkY3OTU3MjVJUg=="],[42,"cHY3OTU3ODZjZQ=="],[30,"Tmo3OTU3NzVYZw=="],[31,"UG03OTU3MjFsUg=="],[74,"bHo3OTU3NzNFcQ=="],[53,"dUk3OTU3ODBIZg=="],[109,"WmY3OTU3MjNPZQ=="],[55,"SFc3OTU3NzV0Yw=="],[128,"TXk3OTU3Mjl0UQ=="],[79,"amk3OTU3MzJ5QQ=="],[5,"U1Y3OTU3MzNHcQ=="],[77,"eGk3OTU3MjdjWA=="],[32,"RmY3OTU3NzRTRg=="],[134,"dGM3OTU3MjVuaw=="],[60,"d3Y3OTU3MjZyeQ=="],[90,"VW03OTU3NzZBWA=="],[61,"cFU3OTU3OTJhaA=="],[39,"T2c3OTU3MjJlRg=="],[9,"RE03OTU3MjRJeA=="],[96,"cmQ3OTU3MjlvSA=="],[112,"d1M3OTU3NzdwdQ=="],[49,"V243OTU3ODd3SQ=="],[75,"Z0o3OTU3NzNKZg=="],[35,"Y3k3OTU3MzNBTQ=="],[140,"QXE3OTU3MzJNdw=="],[56,"UW83OTU3NzZXSw=="],[66,"SlA3OTU3ODJoTw=="],[113,"b3E3OTU3MjBkdQ=="],[15,"YU03OTU3NzJ6dA=="],[135,"b0o3OTU3MTNtaQ=="],[8,"VEY3OTU3MjhMeQ=="],[147,"ZEI3OTU3MjVrUQ=="],[125,"cnI3OTU3MjRNSQ=="],[24,"ZUE3OTU3OTBjZQ=="],[63,"SkM3OTU3MzhMeQ=="],[22,"bVI3OTU3NzJBRA=="],[29,"T1M3OTU3NzlzdQ=="],[50,"RGQ3OTU3ODV4Qg=="],[64,"Y1A3OTU3OTFJcA=="],[44,"bGo3OTU3NzJrcg=="],[115,"RUY3OTU3MzBPbQ=="],[131,"THU3OTU3MjRzdQ=="],[20,"cFM3OTU3ODl5eg=="],[100,"S0o3OTU3MjVYVg=="],[68,"WEY3OTU3ODV0aQ=="],[72,"VmY3OTU3MjRSYw=="],[73,"dGw3OTU3MjhMRw=="],[71,"VlU3OTU3NzVKeQ=="],[121,"Z3A3OTU3MzBzdA=="],[45,"WEM3OTU3ODNIaQ=="],[114,"aGs3OTU3MjRGaQ=="],[37,"Qk83OTU3MjdYRg=="],[38,"bEc3OTU3MjZ3dg=="],[110,"TkU3OTU3MjBNUg=="],[149,"SFc3OTU3MjVmVA=="],[108,"Q0U3OTU3NzVLSQ=="],[141,"a283OTU3MjRNSg=="],[76,"elk3OTU3MzJBWQ=="],[82,"c2c3OTU3NzZxTA=="],[16,"cFA3OTU3NzRmZA=="],[111,"S3A3OTU3NzdnUw=="],[4,"SFI3OTU3OTBoRQ=="],[152,"dms3OTU3MjdBdg=="],[91,"VnI3OTU3MjhqUQ=="],[145,"a2k3OTU3MzBrRg=="],[106,"TFE3OTU3MjZsVA=="],[46,"eWc3OTU3MjJSUg=="],[150,"TUw3OTU3MjFsTA=="],[116,"eW43OTU3Mjdmeg=="],[117,"Rm43OTU3MjlLZA=="],[11,"Rlc3OTU3MjRMcw=="],[136,"U0w3OTU3ODBoVg=="],[59,"Sk03OTU3ODRXRA=="],[12,"aHM3OTU3MjFLZQ=="],[23,"UFY3OTU3ODRaSw=="],[107,"aGM3OTU3MjhrRw=="],[28,"R043OTU3NzZUUQ=="],[146,"d3E3OTU3MjF2bA=="],[101,"cmI3OTU3NzdRcA=="],[14,"RmY3OTU3ODlydQ=="],[139,"WGY3OTU3MjRLTA=="],[83,"a0I3OTU3MjlvRA=="],[119,"cmc3OTU3MjdMQw=="],[19,"QVM3OTU3OTFsbg=="],[33,"Y1M3OTU3ODZPUw=="],[18,"Y2s3OTU3OTBseA=="],[127,"V3k3OTU3MjdGVg=="],[153,"bmc3OTU3MzJ1cg=="],[1,"a1o3OTU3OTFWbQ=="],[80,"cEk3OTU3Mjl0WQ=="]/* pegar arreglo grande aquí */ ];

  iN.sort((a, b) => a[0] - b[0]);

    function generarPlaybackURL(k) {
      let url = '';
      for (const e of iN) {
        const v = e[1];
        url += String.fromCharCode(parseInt(atob(v).replace(/\D/g, '')) - k);
      }
      return url;
    }

    const claves = [75033 + 720642, 50095 + 592865];
    let currentURL = null;
    let currentPlayer = null;

    function reproducirConClave(k) {
      const playbackURL = generarPlaybackURL(k);
      if (!playbackURL || playbackURL.length < 20 || !playbackURL.includes("http")) {
        return false;
      }
      currentURL = playbackURL;

      const p2pConfig = { trackerZone: 'us', sourceUrl: playbackURL };
      P2PEngineHls.tryRegisterServiceWorker(p2pConfig).then(() => {
        if (currentPlayer) currentPlayer.destroy();
        currentPlayer = new Clappr.Player({
          source: playbackURL,
          parentId: "#player",
          plugins: [SwarmCloudClapprPlugin],
          width: "100%",
          height: "100%",
          autoPlay: true,
          mute: false,
          playsinline: true,
          playback: {
            hlsjsConfig: {
              maxBufferSize: 0,
              maxBufferLength: 12,
              liveSyncDurationCount: 3,
              p2pConfig: p2pConfig
            }
          }
        });
        window.player = currentPlayer;
      });
      return true;
    }

    function iniciarReproduccion() {
      for (const clave of claves) {
        if (reproducirConClave(clave)) break;
      }
    }

    // Auto-recarga si el video se detiene
    function iniciarVerificacion() {
      setInterval(() => {
        if (!currentPlayer) return;
        const state = currentPlayer.getPlayback()?.getState?.();
        if (state === "IDLE" || state === "ERROR" || state === "STOPPED") {
          console.warn("Stream detenido. Reiniciando...");
          iniciarReproduccion();
        }
      }, 30000); // cada 30 segundos
    }

    iniciarReproduccion();
    iniciarVerificacion();
  </script>
</body>
</html>

