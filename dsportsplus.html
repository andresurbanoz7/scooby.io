<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Reproductor de ESPN</title>
    <!-- Política de seguridad para bloquear scripts no deseados -->
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' https://tiogol.com ; object-src 'none';">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            background: #000;
        }
        .video-container {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        /* Ajuste para pantallas móviles */
        @media (max-width: 768px) {
            iframe {
                width: 100%;
                height: calc(100vh - 50px); /* Deja espacio para el botón */
                border: none;
                box-shadow: none;
            }
        }
        /* Estilo del botón de reproducción */
        .play-button {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            border: none;
            font-size: 16px;
            z-index: 2;
            display: none; /* Oculto por defecto */
        }
    </style>
</head>
<body>
    <div class="video-container">
        <!-- Botón de "Reproducir" para móviles -->
        <button class="play-button" id="playBtn">▶ Reproducir</button>
        
        <!-- Iframe del video -->
        <iframe 
            id="videoFrame"
            src="https://tiogol.com/vivo/canal.php?stream=dsportsplus"
            allow="autoplay; fullscreen; encrypted-media; gyroscope; accelerometer"
            allowfullscreen
            muted
        ></iframe>
    </div>

    <!-- Script para controlar el video -->
    <script>
        // Mostrar botón solo en móviles (si autoplay falla)
        const playBtn = document.getElementById('playBtn');
        const videoFrame = document.getElementById('videoFrame');

        // Detectar dispositivo móvil
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

        // Mostrar botón si es móvil
        if (isMobile) {
            playBtn.style.display = 'block';
        }

        // Función para reproducir video
        function playVideo() {
            try {
                // Intentar comando de reproducción
                videoFrame.contentWindow.postMessage(
                    '{"event":"command","func":"playVideo","args":""}',
                    '*'
                );
                playBtn.style.display = 'none'; // Ocultar botón
            } catch (e) {
                console.error("Error al reproducir:", e);
                alert("Por favor, toca el video para iniciar la reproducción");
            }
        }

        // Evento para botón manual
        playBtn.addEventListener('click', playVideo);

        // Manejar rotación de pantalla
        window.addEventListener('orientationchange', () => {
            if (window.orientation === 90 || window.orientation === -90) {
                document.body.style.height = '100vh';
                videoFrame.style.height = '100vh';
            } else {
                videoFrame.style.height = isMobile ? 'calc(100vh - 50px)' : '80%';
            }
        });
    </script>
</body>
</html>